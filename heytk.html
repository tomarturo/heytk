<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="chat.css">
    <script src="Gradient.js" ></script>
</head>
<body>
    <canvas id="gradient-canvas" style="width:100vw;height:100vh"></canvas>
    <main class="main">
        <aside class="chat-wrapper">
            <header class="chat-header">
                <h1>Hi. I'm <span class="tk-highlight">.tk</span></h1>
                <p>What would you like to learn about Tom Kurzeka?</p>
            </header>
            <div id="chat-container">
                <div id="chat-display"></div>
                <form id="chat-form" autocomplete="off">
                    <input type="text" id="user-input" placeholder="Ask .tk..."/>
                    <button type="submit"></button>
                </form>
            </div>
            <section class="icebreakers-wrapper">
                <header class="icebreakers-header">
                    <h3>Icebreakers</h3>
                    <h6>100% Organic</h6>
                </header>
                <div class="icebreaker-tiles-wrapper">
                    <div class="icebreaker-tile">
                        <h4>This is a question about Tom</h4>
                        <p>Copy</p>
                    </div>
                    <div class="icebreaker-tile">
                        <h4>This is a question about Tom</h4>
                        <p>Copy</p>
                    </div><div class="icebreaker-tile">
                        <h4>This is a question about Tom</h4>
                        <p>Copy</p>
                    </div><div class="icebreaker-tile">
                        <h4>This is a question about Tom</h4>
                        <p>Copy</p>
                    </div>
                </div>
            </section>
        </aside>
        <section class="projects-wrapper">
            <div class="project-card-wrapper" id="solutions">
                <div class="front-card">
                    <header class="project-header">
                        <div class="project-title-wrapper">
                            <h2>Small Business Solutions</h2>
                            <p>VistaPrint • 2023</p>
                        </div>
                        <img src="./images/logos/vista-logo.svg" alt="VistaPrint company logo in black and white">
                    </header>
                </div>
                <div class="accordion-1"></div>
                <div class="accordion-2"></div>
                <div class="accordion-3"></div>
                <div class="accordion-4"></div>
            </div>
            <div class="case-study" id="solutions-study">
                <div class="case-study-slide">
                    <h2>This is the opening statement for a case study</h2>
                </div>
                <div class="case-study-split-wrapper">
                    <img src="" alt="">
                    <img src="" alt="">
                </div>
                <div class="case-study-statement">
                    <h3>This is a wide, short statement for the case study</h3>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
            </div>
            <div class="project-card-wrapper" id="brand-first">
                <div class="front-card">
                    <header class="project-header">
                        <div class="project-title-wrapper">
                            <h2>Brand-First Customer Journey</h2>
                            <p>VistaPrint • 2023</p>
                        </div>
                        <img src="./images/logos/vista-logo.svg" alt="VistaPrint company logo in black and white">
                    </header>
                </div>
                <div class="accordion-1"></div>
                <div class="accordion-2"></div>
                <div class="accordion-3"></div>
                <div class="accordion-4"></div>
            </div>
            <div class="case-study" id="brand-first-study">
                <div class="case-study-slide">
                    <h2>This is the opening statement for a case study</h2>
                </div>
                <div class="case-study-split-wrapper">
                    <img src="" alt="">
                    <img src="" alt="">
                </div>
                <div class="case-study-statement">
                    <h3>This is a wide, short statement for the case study</h3>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
            </div>
            <div class="project-card-wrapper" id="field-reports">
                <div class="front-card">
                    <header class="project-header">
                        <div class="project-title-wrapper">
                            <h2>Field Reports Data Pipeline</h2>
                            <p>The Dyrt • 2022</p>
                        </div>
                        <img src="./images/logos/the-dyrt-logo.svg" alt="The Dyrt company logo in white">
                    </header>
                </div>
                <div class="accordion-1"></div>
                <div class="accordion-2"></div>
                <div class="accordion-3"></div>
                <div class="accordion-4"></div>
            </div>
            <div class="case-study" id="field-reports-study">
                <div class="case-study-slide">
                    <h2>This is the opening statement for a case study</h2>
                </div>
                <div class="case-study-split-wrapper">
                    <img src="" alt="">
                    <img src="" alt="">
                </div>
                <div class="case-study-statement">
                    <h3>This is a wide, short statement for the case study</h3>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
            </div>
            <div class="project-card-wrapper" id="manager-portal">
                <div class="front-card">
                    <header class="project-header">
                        <div>
                            <h2>Inventory Management Portal</h2>
                            <p>The Dyrt • 2022</p>
                        </div>
                        <img src="/images/logos/the-dyrt-logo.svg" alt="The Dyrt company logo in white">
                    </header>
                </div>
                <div class="accordion-1"></div>
                <div class="accordion-2"></div>
                <div class="accordion-3"></div>
                <div class="accordion-4"></div>
            </div>
            <div class="case-study" id="manager-portal-study">
                <div class="case-study-slide">
                    <h2>This is the opening statement for a case study</h2>
                </div>
                <div class="case-study-split-wrapper">
                    <img src="" alt="">
                    <img src="" alt="">
                </div>
                <div class="case-study-statement">
                    <h3>This is a wide, short statement for the case study</h3>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
                <div class="case-study-slide">
                    <p class="case-study-text">This is another statement about this case study</p>
                </div>
            </div>
        </section>
    </main>
    <!-- Start GRADIENT -->
    <script>
        var gradient = new Gradient()
        gradient.initGradient('#gradient-canvas');
    </script>

    <!-- Start GSAP & JQUERY for project cards and case study animations -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script>
    $(document).ready(function() {
        var projectCards = $(".project-card-wrapper");
        var caseStudies = $(".case-study");
        var isOpen = [false, false, false, false];

        function playHoverAnimation(index) {
        // Play the hover animation if the card is not open
        if (!isOpen[index]) {
            var card_hover = gsap.timeline({ paused: true });

            // Apply the staggered rotation animation
            card_hover.to(projectCards.eq(index).find(".front-card, .accordion-1, .accordion-2, .accordion-3"), {
            stagger: {
                each: 0.02,
                from: "start",
                ease: "back.out",
            },
            duration: 0.3,
            ease: "back.out",
            rotateX: function (i) {
                return -45 + i * 10;
            },
            scaleY: 1.03,
            });

            card_hover.play();
        }
        }

        function reverseHoverAnimation(index) {
        // Reverse the hover animation if the card is not open
        if (!isOpen[index]) {
            var card_hover = gsap.timeline({ paused: true });

            // Apply the staggered rotation animation in reverse
            card_hover.to(projectCards.eq(index).find(".front-card, .accordion-1, .accordion-2, .accordion-3"), {
            stagger: {
                each: 0.02,
                from: "end",
                ease: "circ.out",
            },
            duration: 0.3,
            ease: "circ.out",
            rotateX: 0,
            scaleY: 1,
            });

            card_hover.play();
        }
        }

        projectCards.each(function(index) {
        $(this).hover(
            function() {
            playHoverAnimation(index);
            },
            function() {
            reverseHoverAnimation(index);
            }
        );

        $(this).click(function() {
            console.log("Clicked Card " + (index + 1) + "!");
            var caseStudy = caseStudies.eq(index);

            if (isOpen[index]) {
            caseStudy.slideUp(300, function() {
                caseStudy.css({ overflow: "hidden", height: "0" }); // Change overflow to hidden after slideUp
                console.log("Animation completed!");
            });
            } else {
            // Reverse the hover animation if the card is not open and is clicked
            reverseHoverAnimation(index);
            caseStudy.slideDown(300, function() {
                caseStudy.css({ overflow: "auto", height: "auto" }); // Change overflow to auto after slideDown
                console.log("Animation completed!");
            });
            }
            isOpen[index] = !isOpen[index];
        });
        });
    });
    </script>
    
    <!-- START CHAT SCRIPTS -->
    <script>
        // Array to store chat history
        var chatHistory = [];
    
        // Function to display chat history
        function displayChatHistory() {
            $("#chat-display").empty(); // Clear existing chat messages
            chatHistory.forEach(function (chat) {
                var messageClass = chat.type === "user" ? "user-message" : "bot-message";
                $("#chat-display").append("<div class='" + messageClass + "'>" + chat.message + "</div>");
            });
            // Scroll down to display the most recent messages
            var chatDisplay = document.getElementById("chat-display");
            chatDisplay.scrollTop = chatDisplay.scrollHeight;
        }
    
        $(document).ready(function() {
            $("#chat-form").submit(function(event) {
                event.preventDefault();
    
                // Get user input
                var userMessage = $("#user-input").val().trim();
                if (userMessage === "") {
                    return;
                }
    
                // Display user message in the chat display area
                $("#chat-display").append("<div class='user-message'>" + userMessage + "</div>");
    
                // Add user message to chat history
                chatHistory.push({ type: "user", message: userMessage });
    
                // Send user message to the Python backend via API
                $.ajax({
                    type: "POST",
                    url: "http://127.0.0.1:5000/api/chat",  // Replace with your Python server URL
                    data: JSON.stringify({ "message": userMessage }),
                    contentType: "application/json",
                    dataType: "json",
                    success: function(response) {
                        // Display chatbot's response in the chat display area
                        var botResponse = response.response;
                        $("#chat-display").append("<div class='bot-message'>" + botResponse + "</div>");
    
                        // Add chatbot's response to chat history
                        chatHistory.push({ type: "bot", message: botResponse });
    
                        // Clear the user input field
                        $("#user-input").val("");
    
                        // Scroll down to display the most recent messages
                        var chatDisplay = document.getElementById("chat-display");
                        chatDisplay.scrollTop = chatDisplay.scrollHeight;
                    },
                    error: function(error) {
                        console.error("Error sending message:", error);
                    }
                });
            });
        });
    </script>
</body>
</html>

